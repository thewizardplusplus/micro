let debug_items:4 load "debug_items";

fn debug_properties(properties)
  debug_items "{" keys properties "}" fn(key)
    + strs key + ": " strs .key properties
  ;
;

fn debug_node(node)
  + "{"
    + "\"type\": " + strs ."type"node + ", "
    + "\"properties\": " + debug_properties ."properties"node + ", "
    + "\"children\": " + debug_items "[" ."children"node "]" fn(child)
      debug_node child
    ;
  "}"
;
