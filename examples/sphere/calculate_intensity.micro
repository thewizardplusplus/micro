fn calculate_intensity(normal light_direction specular_exponent ambient_light)
	let normal as(."normalized"normal):1 normal;
	let light_direction as(."normalized"light_direction):1 light_direction;
	let directions_product as(."dot"normal):2 normal light_direction;
	let directions_product
		if > 0 directions_product
			fn() _ directions_product;
			fn() 0;
	;
	+ ambient_light pow directions_product specular_exponent
;
