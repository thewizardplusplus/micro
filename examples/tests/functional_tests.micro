let ANSI_CODES
	#"bold" "1"
	#"red" "31"
	#"green" "32"
{};

fn ansi(code text)
	+ "\x1b[" + . code ANSI_CODES + "m" + text "\x1b[m"
;

fn test(name result)
	outln
		+ ansi "bold" name
		+ " "
		if result
			fn() ansi "green" "[SUCCESS]";
			fn() ansi "red" "[FAILURE]";
;

test "use of a hash as an object" fn()
	let adder
		#"sum" 0

		#"set_sum" fn(this sum)
			#"sum" sum this
		;

		#"add" fn(this number)
			let sum + ."sum"this number;
			as(."set_sum"this):2 this sum
		;
	{};

	let adder as(."add"adder):2 adder 2;
	let adder as(."add"adder):2 adder 3;
	== 5 ."sum"adder
;
