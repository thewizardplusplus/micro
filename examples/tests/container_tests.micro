let test:2 load "std/test/test";
let group:2 load "std/test/group";

group "container tests" fn()
	,test "size of an array" fn()
		&& == 0 size []
		== 5 size ,1,2,3,4,5[]
	;

	,test "size of a hash table" fn()
		&& == 0 size {}
		== 2 size #"one"1#"two"2{}
	;

	,test "size of a pack" fn()
		== 1 size >@5
	;

	,test "indexing of an empty array" fn()
		&& == nil . 0 []
		&& == nil . 1 []
		&& == nil . 10 []
		&& == nil . _1 []
		&& == nil . _2 []
		== nil . _10 []
	;

	,test "indexing of a nonempty array" fn()
		&& == 1 . 0 ,1,2,3,4,5[]
		&& == 3 . 2 ,1,2,3,4,5[]
		&& == 3 . 2.5 ,1,2,3,4,5[]
		&& == 5 . 4 ,1,2,3,4,5[]
		&& == nil . 6 ,1,2,3,4,5[]
		&& == nil . 10 ,1,2,3,4,5[]
		&& == 5 . _1 ,1,2,3,4,5[]
		&& == 3 . _3 ,1,2,3,4,5[]
		&& == 3 . _3.5 ,1,2,3,4,5[]
		&& == 1 . _5 ,1,2,3,4,5[]
		&& == nil . _6 ,1,2,3,4,5[]
		== nil . _10 ,1,2,3,4,5[]
	;

	,test "indexing of an empty array (with default)" fn()
		&& == 12 ? . 0 [] 12
		&& == 12 ? . 1 [] 12
		&& == 12 ? . 10 [] 12
		&& == 12 ? . _1 [] 12
		&& == 12 ? . _2 [] 12
		== 12 ? . _10 [] 12
	;

	,test "indexing of a nonempty array (with default)" fn()
		&& == 1 ? . 0 ,1,2,3,4,5[] 12
		&& == 3 ? . 2 ,1,2,3,4,5[] 12
		&& == 3 ? . 2.5 ,1,2,3,4,5[] 12
		&& == 5 ? . 4 ,1,2,3,4,5[] 12
		&& == 12 ? . 6 ,1,2,3,4,5[] 12
		&& == 12 ? . 10 ,1,2,3,4,5[] 12
		&& == 5 ? . _1 ,1,2,3,4,5[] 12
		&& == 3 ? . _3 ,1,2,3,4,5[] 12
		&& == 3 ? . _3.5 ,1,2,3,4,5[] 12
		&& == 1 ? . _5 ,1,2,3,4,5[] 12
		&& == 12 ? . _6 ,1,2,3,4,5[] 12
		== 12 ? . _10 ,1,2,3,4,5[] 12
	;

	,test "indexing of an empty hash table" fn()
		== nil . "test" {}
	;

	,test "indexing of a nonempty hash table" fn()
		&& == 1 . "one" #"one"1#"two"2{}
		== nil . "test" #"one"1#"two"2{}
	;

	,test "indexing of an empty hash table (with default)" fn()
		== 12 ? . "test" {} 12
	;

	,test "indexing of a nonempty hash table (with default)" fn()
		&& == 1 ? . "one" #"one"1#"two"2{} 12
		== 12 ? . "test" #"one"1#"two"2{} 12
	;

	,test "indexing of a pack" fn()
		&& == 5 . 0 >@5
		&& == nil . 10 >@5
		&& == 5 . _1 >@5
		== nil . _10 >@5
	;

	,test "indexing of a pack (with default)" fn()
		&& == 5 ? . 0 >@5 12
		&& == 12 ? . 10 >@5 12
		&& == 5 ? . _1 >@5 12
		== 12 ? . _10 >@5 12
	;
[];
